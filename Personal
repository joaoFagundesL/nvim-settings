
#!/bin/bash

# File to monitor and convert
input_file="$1"
output_file="${input_file%.md}.pdf"

# Check if input file exists
if [ ! -f "$input_file" ]; then
    echo "Input file does not exist!"
    exit 1
fi

# Run Pandoc to convert Markdown to PDF
function convert_to_pdf {
    pandoc "$input_file" -o "$output_file" --pdf-engine=pdflatex
    echo "Converted $input_file to $output_file"
}

# Convert on initial run
convert_to_pdf

# Monitor the file and convert on changes
inotifywait -m -e modify "$input_file" | while read; do
    convert_to_pdf
done
